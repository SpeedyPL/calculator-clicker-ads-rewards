<!DOCTYPE html>
<html>
<head>
    <title>Weryfikacja</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
</head>
<body style="background:#121212; color:white; text-align:center; font-family:sans-serif;">
    <div style="margin-top:100px; border:2px solid #00ff88; display:inline-block; padding:20px;">
        <h1 id="status">Inicjalizacja...</h1>
        <div id="result" style="font-size:40px; color:#00ff88;">---</div>
        <p id="desc">Czekaj na przekierowanie...</p>
    </div>

    <script>
        const SALT = "1800Skenk1800";
        const AD_LINK = "https://link-hub.net/3407631/7NvAFra2HiYi"; // Twój link Linkvertise

        const params = new URLSearchParams(window.location.search);
        const id = params.get('id');
        const type = params.get('type');

        if (id && type) {
            // Pierwsze wejście z gry: zapamiętaj i wyślij do reklamy
            localStorage.setItem('id', id);
            localStorage.setItem('type', type);
            setTimeout(() => { window.location.href = AD_LINK; }, 1000);
        } else {
            // Powrót z reklamy: odczytaj z pamięci i pokaż kod
            const sId = localStorage.getItem('id');
            const sType = localStorage.getItem('type');
            if (sId && sType) {
                const hash = CryptoJS.SHA256(sId + sType + SALT).toString().toUpperCase();
                document.getElementById('status').innerText = "TWÓJ KOD:";
                document.getElementById('result').innerText = hash.substring(0, 6);
                document.getElementById('desc').innerText = "Wpisz go w Unity.";
                localStorage.removeItem('id'); // Kod staje się jednorazowy
            } else {
                document.getElementById('status').innerText = "BŁĄD";
                document.getElementById('desc').innerText = "Uruchom reklamę z poziomu gry.";
            }
        }
    </script>
</body>
</html>
